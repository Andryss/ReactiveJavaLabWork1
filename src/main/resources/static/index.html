<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spaceships Management System</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Server Status Indicator (Minimized) -->
    <div class="status-indicator">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">Checking...</span>
    </div>

    <div class="main-container">
        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button">
                    <i class="bi bi-house-door"></i> Home
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="spaceships-tab" data-bs-toggle="tab" data-bs-target="#spaceships" type="button">
                    <i class="bi bi-rocket"></i> Spaceships
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="staff-tab" data-bs-toggle="tab" data-bs-target="#staff" type="button">
                    <i class="bi bi-people"></i> Staff
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="requests-tab" data-bs-toggle="tab" data-bs-target="#requests" type="button">
                    <i class="bi bi-clipboard-check"></i> Requests
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="mainTabContent">
            <!-- Home Tab -->
            <div class="tab-pane fade show active" id="home" role="tabpanel">
                <div class="main-screen">
                    <h1>ðŸš€ Spaceships Management System</h1>
                    <p class="lead text-muted">Manage your fleet, staff, and maintenance requests all in one place</p>
                    <div class="gif-container">
                        <img src="https://media.giphy.com/media/l0MYC0LajdoPo3ATu/giphy.gif" alt="Funny spaceship gif">
                    </div>
<div class="mt-4">
                        <p class="text-muted">Navigate through the tabs above to manage different aspects of your spaceship fleet.</p>
                    </div>
                </div>
            </div>

            <!-- Spaceships Tab -->
            <div class="tab-pane fade" id="spaceships" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-rocket"></i> Spaceships Database</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Spaceships List</h5>
                            <button class="btn btn-primary" onclick="showSpaceshipModal()">
                                <i class="bi bi-plus-circle"></i> Add Spaceship
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Serial</th>
                                        <th>Name</th>
                                        <th>Manufacturer</th>
                                        <th>Type</th>
                                        <th>Manufacture Date</th>
                                        <th>Max Speed</th>
                                        <th>Dimensions</th>
                                        <th>Engine</th>
                                        <th>Crew</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="spaceshipsTableBody">
                                    <tr>
                                        <td colspan="10" class="text-center">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <button class="btn btn-sm btn-outline-secondary" id="spaceshipsPrevBtn" onclick="navigateSpaceshipsPage(-1)" disabled>
                                <i class="bi bi-chevron-left"></i> Previous
                            </button>
                            <span class="small" id="spaceshipsPageInfo">Page 1</span>
                            <button class="btn btn-sm btn-outline-secondary" id="spaceshipsNextBtn" onclick="navigateSpaceshipsPage(1)" disabled>
                                Next <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Staff Tab -->
            <div class="tab-pane fade" id="staff" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-people"></i> Staff Database</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Repairmen List</h5>
                            <button class="btn btn-primary" onclick="showRepairmanModal()">
                                <i class="bi bi-plus-circle"></i> Add Repairman
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Position</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="repairmenTableBody">
                                    <tr>
                                        <td colspan="4" class="text-center">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <button class="btn btn-sm btn-outline-secondary" id="repairmenPrevBtn" onclick="navigateRepairmenPage(-1)" disabled>
                                <i class="bi bi-chevron-left"></i> Previous
                            </button>
                            <span class="small" id="repairmenPageInfo">Page 1</span>
                            <button class="btn btn-sm btn-outline-secondary" id="repairmenNextBtn" onclick="navigateRepairmenPage(1)" disabled>
                                Next <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Requests Tab -->
            <div class="tab-pane fade" id="requests" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-clipboard-check"></i> Maintenance Requests Database</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Maintenance Requests List</h5>
                            <button class="btn btn-primary" onclick="showRequestModal()">
                                <i class="bi bi-plus-circle"></i> Add Request
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Spaceship Serial</th>
                                        <th>Comment</th>
                                        <th>Status</th>
                                        <th>Assignee</th>
                                        <th>Created</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="requestsTableBody">
                                    <tr>
                                        <td colspan="7" class="text-center">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <button class="btn btn-sm btn-outline-secondary" id="requestsPrevBtn" onclick="navigateRequestsPage(-1)" disabled>
                                <i class="bi bi-chevron-left"></i> Previous
                            </button>
                            <span class="small" id="requestsPageInfo">Page 1</span>
                            <button class="btn btn-sm btn-outline-secondary" id="requestsNextBtn" onclick="navigateRequestsPage(1)" disabled>
                                Next <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Spaceship Modal -->
    <div class="modal fade" id="spaceshipModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="spaceshipModalTitle">Add Spaceship</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="max-height: 80vh; overflow-y: auto;">
                    <form id="spaceshipForm">
                        <input type="hidden" id="spaceshipSerial" name="serial">
                        
                        <h6 class="mb-3 text-primary">Basic Information</h6>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Serial Number *</label>
                                <input type="number" class="form-control" id="spaceshipSerialInput" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Name *</label>
                                <input type="text" class="form-control" id="spaceshipName" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Manufacturer *</label>
                                <input type="text" class="form-control" id="spaceshipManufacturer" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Type *</label>
                                <select class="form-select" id="spaceshipType" required>
                                    <option value="">Select type</option>
                                    <option value="CARGO">CARGO</option>
                                    <option value="EXPLORATION">EXPLORATION</option>
                                    <option value="SCOUT">SCOUT</option>
                                    <option value="BATTLE">BATTLE</option>
                                    <option value="PASSENGER">PASSENGER</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Manufacture Date *</label>
                                <input type="datetime-local" class="form-control" id="spaceshipManufactureDate" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Max Speed</label>
                                <input type="number" class="form-control" id="spaceshipMaxSpeed" value="0">
                            </div>
                        </div>
                        
                        <hr class="my-4">
                        <h6 class="mb-3 text-primary">Dimensions</h6>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Length (meters)</label>
                                <input type="number" class="form-control" id="dimensionsLength" value="0">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Width (meters)</label>
                                <input type="number" class="form-control" id="dimensionsWidth" value="0">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Height (meters)</label>
                                <input type="number" class="form-control" id="dimensionsHeight" value="0">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Weight (tons)</label>
                                <input type="number" step="0.01" class="form-control" id="dimensionsWeight" value="0">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Volume (cubic meters)</label>
                                <input type="number" step="0.01" class="form-control" id="dimensionsVolume" value="0">
                            </div>
</div>

                        <hr class="my-4">
                        <h6 class="mb-3 text-primary">Engine</h6>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Model</label>
                                <input type="text" class="form-control" id="engineModel">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Thrust (kN)</label>
                                <input type="number" class="form-control" id="engineThrust" value="0">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Fuel Type</label>
                                <select class="form-select" id="engineFuelType">
                                    <option value="">Select fuel type</option>
                                    <option value="LIQUID_HYDROGEN">LIQUID_HYDROGEN</option>
                                    <option value="KEROSENE">KEROSENE</option>
                                    <option value="METHANE">METHANE</option>
                                    <option value="ELECTRIC">ELECTRIC</option>
                                    <option value="NUCLEAR">NUCLEAR</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Fuel Consumption (per hour)</label>
                                <input type="number" step="0.01" class="form-control" id="engineFuelConsumption" value="0">
                            </div>
                        </div>
                        
                        <hr class="my-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="mb-0 text-primary">Crew Members</h6>
                            <button type="button" class="btn btn-sm btn-success" onclick="addCrewMember()">
                                <i class="bi bi-plus-circle"></i> Add Crew Member
                            </button>
                        </div>
                        <div id="crewMembersContainer">
                            <!-- Crew members will be added here dynamically -->
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveSpaceship()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Repairman Modal -->
    <div class="modal fade" id="repairmanModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="repairmanModalTitle">Add Repairman</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="repairmanForm">
                        <input type="hidden" id="repairmanId">
                        <div class="mb-3">
                            <label class="form-label">Name *</label>
                            <input type="text" class="form-control" id="repairmanName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Position *</label>
                            <input type="text" class="form-control" id="repairmanPosition" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveRepairman()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Spaceship View Modal (Read-only) -->
    <div class="modal fade" id="spaceshipViewModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Spaceship Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="max-height: 80vh; overflow-y: auto;">
                    <div id="spaceshipViewContent">
                        <div class="text-center">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Repairman View Modal (Read-only) -->
    <div class="modal fade" id="repairmanViewModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Repairman Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="repairmanViewContent">
                        <div class="text-center">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Request Modal -->
    <div class="modal fade" id="requestModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="requestModalTitle">Add Maintenance Request</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="requestForm">
                        <input type="hidden" id="requestId">
                        <div class="mb-3">
                            <label class="form-label">Spaceship Serial *</label>
                            <input type="hidden" id="requestSpaceshipSerial" required>
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary form-control text-start" type="button" id="spaceshipDropdownBtn" data-bs-toggle="dropdown" aria-expanded="false">
                                    <span id="spaceshipSelectedText">Select spaceship...</span>
                                </button>
                                <div class="dropdown-menu w-100 p-0" id="spaceshipDropdownContainer">
                                    <ul class="list-unstyled mb-0" id="spaceshipDropdownMenu" style="max-height: 300px; overflow-y: auto;">
                                        <li><div class="px-3 py-2 text-muted">Loading...</div></li>
                                    </ul>
                                    <div class="d-flex justify-content-between align-items-center p-2 border-top" id="spaceshipPagination" style="display: none;">
                                        <button class="btn btn-sm btn-outline-secondary" id="spaceshipPrevBtn" onclick="navigateSpaceshipPage(-1)" disabled>
                                            <i class="bi bi-chevron-left"></i> Previous
                                        </button>
                                        <span class="small" id="spaceshipPageInfo">Page 1</span>
                                        <button class="btn btn-sm btn-outline-secondary" id="spaceshipNextBtn" onclick="navigateSpaceshipPage(1)" disabled>
                                            Next <i class="bi bi-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Comment *</label>
                            <textarea class="form-control" id="requestComment" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Assignee</label>
                            <input type="hidden" id="requestAssignee">
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary form-control text-start" type="button" id="assigneeDropdownBtn" data-bs-toggle="dropdown" aria-expanded="false">
                                    <span id="assigneeSelectedText">Select repairman...</span>
                                </button>
                                <div class="dropdown-menu w-100 p-0" id="assigneeDropdownContainer">
                                    <ul class="list-unstyled mb-0" id="assigneeDropdownMenu" style="max-height: 300px; overflow-y: auto;">
                                        <li><div class="px-3 py-2 text-muted">Loading...</div></li>
                                    </ul>
                                    <div class="d-flex justify-content-between align-items-center p-2 border-top" id="assigneePagination" style="display: none;">
                                        <button class="btn btn-sm btn-outline-secondary" id="assigneePrevBtn" onclick="navigateAssigneePage(-1)" disabled>
                                            <i class="bi bi-chevron-left"></i> Previous
                                        </button>
                                        <span class="small" id="assigneePageInfo">Page 1</span>
                                        <button class="btn btn-sm btn-outline-secondary" id="assigneeNextBtn" onclick="navigateAssigneePage(1)" disabled>
                                            Next <i class="bi bi-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3" id="requestStatusContainer" style="display: none;">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="requestStatus">
                                <option value="NEW">NEW</option>
                                <option value="ACCEPTED">ACCEPTED</option>
                                <option value="DIAGNOSTICS">DIAGNOSTICS</option>
                                <option value="APPROVAL">APPROVAL</option>
                                <option value="WAITING_PARTS">WAITING_PARTS</option>
                                <option value="IN_REPAIR">IN_REPAIR</option>
                                <option value="QUALITY_CHECK">QUALITY_CHECK</option>
                                <option value="READY_FOR_PICKUP">READY_FOR_PICKUP</option>
                                <option value="COMPLETED">COMPLETED</option>
                                <option value="CANCELLED">CANCELLED</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveRequest()">Save</button>
                </div>
            </div>
    </div>
</div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="js/common.js"></script>
    <script src="js/pagination.js"></script>
    <script src="js/spaceships.js"></script>
    <script src="js/repairmen.js"></script>
    <script src="js/requests.js"></script>
    <script src="js/dropdowns.js"></script>
    <script src="js/view-modals.js"></script>
</body>
</html>